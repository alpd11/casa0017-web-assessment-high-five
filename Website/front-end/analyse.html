<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playwrite+AU+SA:wght@100..400&display=swap" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Papa Parse -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

    <!-- Custom CSS -->
    <link href="./css/cover.css" rel="stylesheet">
    <link href="./css/layout.css" rel="stylesheet">
</head>

<body class="d-flex flex-column text-white bg-dark">
    <div class="container py-4">
        <!-- Header -->
        <header class="mb-auto">
            <div class="d-flex align-items-center justify-content-between border-bottom pb-2">
                <a class="bigheader" href="homepage.html">One Biker</a>
                <nav class="nav nav-masthead">
                    <a class="nav-link" href="homepage.html">Home</a>
                    <a class="nav-link" href=#>Analyse</a>
                    <a class="nav-link" href="about.html">About</a>
                </nav>
            </div>
            
        </header>
        <!-- Main Content -->
        <main class="px4">
            <!-- Real-time Map Section -->
            <section class="mb-5">
                <h2>Real-time Map</h2>
                <div id="map" style="height: 400px; width: 100%; border: 1px solid #ccc;">
                    <!-- Google Map will be initialized here -->
                </div>
            </section>

            <!-- Detail Information Section -->
            <section class="mb-5">
                <h2>Detail Information</h2>
                <!-- New -->
                <div class="row mb-3">
                    <div class="col-md-8 d-flex align-items-center">
                      <label for="detailDatePicker" class="me-2">Select Date:</label>
                      <input type="date" id="detailDatePicker" class="form-control me-2">
                      <button id="updateDetailBtn" class="btn btn-primary">Update</button>
                    </div>
                  </div>

                <div class="row">
                    <div class="col-md-4">
                        <p><strong>Weather:</strong> <span id="weather">N/A</span></p>
                        <p><strong>Temperature:</strong> <span id="temperature">N/A</span></p>
                        <p><strong>Wind Speed:</strong> <span id="windSpeed">N/A</span></p>
                    </div>
                    <div class="col-md-4">
                        <p><strong>Number of collisions:</strong> <span id="bikeCount">N/A</span></p>
                    </div>
                </div>
            </section>

            <!-- Chart Section -->
            <section class="mb-5">
                <h2>Weather Impact Analysis</h2>
                <div class="row">
                    <div class="col-md-8">
                        <canvas id="myChart" width="400" height="200"></canvas>
                    </div>
                    <div class="col-md-4">
                        <div class="datepicker">
                            <label for="startPicker11">Start Date:</label>
                            <input type="date" id="startPicker11" class="form-control mb-3" value="2013-01-01">

                            <label for="endPicker22">End Date:</label>
                            <input type="date" id="endPicker22" class="form-control mb-3" value="2013-01-31">

                            <button id="updateChartBtn" class="btn btn-primary">Update Chart</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Cycling Suggestion Section -->
            <section>

                <div class="containerRelation">
                    <h1>Relationship Between Weather, Temperature, Wind Speed and Collision Count</h1>
                    
                    <h2>Weather</h2>
                    <p>On sunny days, visibility is typically good and road conditions are clear, which can lead to a lower number of collisions. For example, on January 1, 2013, the weather was sunny and the collision count was 1; on January 2, 2013, the weather was cloudy and the collision count was 7. This suggests that in conditions of high visibility, drivers can more easily perceive their surroundings, thereby reducing the likelihood of collisions. During rainy weather, the road becomes slippery and visibility is reduced, increasing the braking distance of vehicles, which can lead to a higher number of collisions. For instance, on January 8, 2013, the weather was rainy and the collision count was 9; on January 9, 2013, the weather was rainy and the collision count was 7. Rain can obstruct a driver's view and also affect the handling of the vehicle, increasing the risk of collisions. Snowy weather can have an even more significant impact on traffic. Snow and ice make the road extremely slippery, causing vehicles to lose control more easily. For example, on January 14, 2013, the weather was snowy and the collision count was 6. Even at low speeds, the probability of collision accidents can be high due to poor road conditions.</p>
                    
                    <h2>Temperature</h2>
                    <p>In low temperatures, especially near or below freezing, roads can become icy, increasing the risk of collisions. For example, on January 15, 2013, the average temperature was -0.2Â°C and the collision count was 9. Low temperatures can cause roads to freeze, reducing the grip of vehicles and thus increasing the likelihood of accidents. High temperatures can cause drivers to feel fatigued and may also affect the mechanical performance of vehicles. For example, in some high-temperature conditions, the collision count may increase. However, this relationship may not be as pronounced as that between low temperatures and collision counts, as high temperatures have a relatively smaller direct impact on road conditions.</p>
                    
                    <h2>Wind Speed</h2>
                    <p>High wind speeds can affect the stability of vehicles, especially in crosswinds. For example, on January 4, 2013, the maximum wind speed was 16.3 m/s and the collision count was 6; on January 5, 2013, the maximum wind speed was 14.8 m/s and the collision count was 8. Strong winds can cause vehicles to deviate from their intended path, increasing the risk of collisions with other vehicles or obstacles. In conditions of low wind speed, vehicles tend to have better stability, and the collision count may be correspondingly lower. However, the impact of wind speed on collision counts can also be influenced by other factors such as weather conditions and temperature.</p>
                    
                    <h2>Comprehensive Analysis</h2>
                    <p>The association between adverse weather and high collision counts is evident. When weather conditions are poor, such as heavy rain, snow, or fog, combined with low temperatures or high wind speeds, the number of collisions often increases significantly. These factors interact, greatly affecting road safety. For example, on days with a combination of rain, snow, and high wind speeds, the collision count can reach high levels. In contrast, under good weather conditions, such as clear skies, moderate temperatures, and low wind speeds, the collision count typically remains low. This indicates that good weather conditions have a positive impact on traffic safety, allowing drivers to better control their vehicles and avoid collisions.</p>
                </div>


                <br>
                <div class="containerSuggestion">
                    <h1>Cycling Suggestion</h1>
                    <h3>Weather Conditions</h3>
        <p>On sunny days, it's essential to stay alert and follow traffic rules diligently. 
            Take regular breaks to avoid fatigue, especially in hot weather. For rainy days, wear waterproof gear, 
            including jackets, shoes, and gloves. Reduce your speed and increase the following distance to account for 
            slippery roads. Be cautious of potential hazards like potholes and use your bike lights to enhance 
            visibility. In snowy conditions, if possible, avoid cycling in heavy snow. If you must ride, 
            consider using tire chains for better traction. Maintain a very low speed and avoid sudden turns or braking. 
            Wear goggles or glasses with anti-fog function to keep your vision clear. On cloudy or overcast days, 
            keep an eye on the weather forecast for sudden changes and use bike lights and reflective gear to improve visibility.</p>
        
        <h3>Temperature Conditions</h3>
        <p>During high temperatures, apply sunscreen and wear sun hats and sunglasses to protect yourself from the sun's harmful rays. Stay hydrated by carrying enough water and electrolyte drinks. Stop cycling if you feel dizzy, nauseous, or unwell. In low temperatures, dress warmly with insulated cycling clothes, gloves, and hats. Choose clothing that allows for flexibility and doesn't restrict movement. Protect your respiratory system from cold air with scarves or masks.</p>
        
        <h3>Wind Speed Conditions</h3>
        <p>When facing a tailwind, control your speed to avoid losing control in case of sudden situations. Maintain balance as tailwinds can affect bike stability. In headwind conditions, keep a steady pedaling rhythm and don't overexert yourself. Lower your body position to reduce wind resistance. For crosswinds, pay attention to your direction as they can push your bike off course. Hold the handlebars firmly to maintain control and avoid overtaking in heavy crosswinds.</p>
        
        <h3>General Tips</h3>
        <p>Before each ride, inspect your bike to ensure that brakes, tires, and chains are in good working order. Plan your route in advance, choosing roads with good conditions and less traffic. Always follow traffic rules, including obeying traffic lights and signs. Make yourself visible with bright clothing, bike lights, and reflective gear. Stay focused while cycling and avoid distractions like using mobile phones. Learn basic emergency skills, such as how to stop quickly and avoid collisions, to enhance your safety on the road.</p>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="mt-auto border-top pt-3">
            <div class="d-flex justify-content-between align-items-center">
                <span class="text-muted">&copy; 2025 One Biker. All rights reserved.</span>
                <ul class="list-unstyled d-flex">
                    <li class="ms-3"><a class="text-muted" href="https://tfl.gov.uk/modes/cycling/routes-and-maps">TfL</a></li>
                    <li class="ms-3"><a class="text-muted" href="https://www.sustrans.org.uk/national-cycle-network/">Sustrans</a></li>
                    <li class="ms-3"><a class="text-muted" href="https://map.bikecitizens.net/gb-london">Bike Citizens</a></li>
                </ul>
            </div>
        </footer>
    </div>

    <!-- Google Maps API -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script>

    <!-- Custom JavaScript -->
    <script src="./js/map.js"></script>
    <script src="./js/chart.js"></script>
    <!-- New -->
    <script src="./js/detailInfo.js"></script>
</body>

</html>